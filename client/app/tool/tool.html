
<div class="ui segment">
  <div class="container">

    <div class="ui page grid">
      <div class="four wide column ui segment">
        <img style="max-width: 80%; max-height: 80%; overflow: auto; margin: auto; position: absolute; top: 0; left: 0; bottom: 0; right: 0;" ng-src="{{tool.logo_url || 'http://simpleicon.com/wp-content/uploads/wrench.png'}}" />
        <img ng-src="http://placehold.it/250/ffffff/ffffff" /> 
      </div>
      <div class="five wide column">
        <h1 style="margin-bottom:0;">{{tool.name}}</h1>
        <div class="meta">{{tool.version}}</div>
        <p class="meta">{{tool.developer}} <i class="check circle icon orange" ng-if="record.acf.organisation_verified"><small style="text-transform: uppercase; padding-left: 2px;">Verified</small></i></p>
        <div ng-bind-html="record.excerpt"></div>
        <p></p>
        <div class="ui buttons">
          <a ng-show="tool.github_url" href="{{tool.github_url}}" target="_blank" class="ui button"><i class="github icon"></i> GitHub</a>
          <div ng-show="tool.github_url && tool.download_url" class="or"></div>
          <a ng-show="tool.download_url" href="{{tool.home_url}}" target="_blank" class="ui positive button">Give it a go</a>
        </div>
      </div>
      <div class="seven wide column">
        <div class="ui center aligned segment">

          <div class="ui error message listErrors" ng-show="listErrors.error">
            <div class="header">
              There was a problem adding this tool to your list
            </div>
            <ul class="list">
              <li>{{ listErrors.error }}</li>
            </ul>
          </div>
          <div ng-show="isLoggedIn()" class="ui dropdown list">
            <div class="ui label addToList" ng-click="loadToolLists()" >
              <i class="plus icon"></i> Add to list
              <i class="dropdown icon"></i>
            </div>
            <div class="menu">
              <div ng-click="addToolToList(value._id)" ng-repeat="(key, value) in toolLists" class="item">{{ value.toolListName }}</div>
              <div ng-click="addToFavourites(tool._id, tool.name)" class="item">Favourites <i class="star icon"></i></div>
              <div ng-click="createNewList()" class="item newList">New List...</div>
            </div>
          </div>

          <h2>Votes</h2>
          <div class="center aligned column">
            <div ng-click="toolVote(true)" class="ui icon button buttonVote">
              <i ng-class="(tool.upvotes.length>tool.downvotes.length) ? 'huge': 'large'" class="thumbs up icon green"></i> </button>
              <span ng-class="(tool.upvotes.length>tool.downvotes.length)? 'huge': 'large'" class="text large">{{ tool.upvotes.length }}</span>
            </div>
          </div>
          <div class="center aligned column">
            <div ng-click="toolVote(false)" class="ui icon button buttonVote">
              <i ng-class="(tool.downvotes.length>tool.upvotes.length) ? 'huge': 'large'" class="thumbs down icon red"></i> </button>
              <span ng-class="(tool.downvotes.length>tool.upvotes.length)? 'huge': 'large'" class="text large">{{ tool.downvotes.length }}</span>
            </div>
          </div>

          <!-- REVIEW STATE BUTTON -->
          <div ng-show="hasUserVoted" class="ui message reviewState">
            <div class="content">
              <div class="header">
                Thanks for voting! Care to leave a review?
              </div>
              <button class="ui button" ng-click="reviewState()">Leave a review</button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <h2 class="ui horizontal divider header">
      <i class="configure icon"></i>
      Tool Information
    </h2>

    <div class="ui page grid" ui-view> <!-- For nested reviews child -->
      <div class="sixteen wide column">
        <div class="ui equal width center aligned padded grid segmentinternally celled stackable">
          <div class="row">
            <div class="column">
              <div ng-bind-html="tool.description"></div>
            </div>
          </div>

          <div class="row">
            <div class="column">
              <p><strong>Company(ies) using this tool</strong></p>
              <div ng-bind-html="tool.companies"></div>
            </div>
            <div class="column">
              <p><strong>Platform(s)</strong></p>
              <div ng-bind-html="tool.platforms"></div>
            </div>
          </div>

          <div class="row">
            <div class="column">
              <p><strong>Price</strong></p>
              <div ng-bind-html="tool.price | currency"></div>
            </div>
            <div class="column">
              <p><strong>Version</strong></p>
              <div ng-bind-html="tool.version"></div>
            </div>
            <div class="column">
              <p><strong>Uploaded date</strong></p>
              <div ng-bind-html="tool.uploaded_date"></div>
            </div>
          </div>
        </div>
      </div> <!-- End ui view -->
    </div>

    <div class="ui page grid" ui-view ng-show="ReviewsExist"> <!-- For nested reviews child -->
      <div class="sixteen wide column">
        <div class="ui equal width center aligned padded grid segmentinternally stackable">

          <div class="row"><div class="column">
            <h3 class="ui horizontal divider header">
              <i class="star icon"></i>
              Reviews
            </h3>
          </div>
        </div>
        <div class="row">
          <div class="ui centered column">
            <h3 style="margin-bottom:0;">Average</h3>
            <div>Out of {{tool.reviews.length}} reviews</div>
            <div class="ui green inverted segment" id="averageScore">
              <h1 style="font-size:70px">{{ToolScore | number:1}}</h1>
            </div>
          </div>
          <div class="left aligned column">
            <strong>Ease of use</strong>
            <div style="float: right; right: 0px;">{{easeOfUse | number:1}}</div>
            <div class="ui green tiny progress" id="progressUse" data-total="10" style="height:8px; width:85%; padding:0">
              <div class="bar"></div>
            </div>
            <strong>Quick to produce</strong>
            <div style="float: right; right: 0px;">{{timeSpentProducing | number:1}}</div>
            <div class="ui green tiny progress" id="progressProd" data-total="10" style="height:8px; width:85%; padding:0">
              <div class="bar">
              </div>
            </div>
            <strong>Level of satisfaction</strong>
            <div style="float: right; right: 0px;">{{satisfiedWithTool | number:1}}</div>
            <div class="ui green tiny progress" id="progressSat" data-total="10" style="height:8px; width:85%; padding:0">
              <div class="bar">
              </div>
            </div>
            <p>
            </div>

            <div class="left aligned column">
              <strong>Likely to recommend</strong>
              <div style="float: right; right: 0px;">{{wouldUseAgain | number:1}}</div>
              <div class="ui green tiny progress" id="progressAgain" data-total="10" style="height:8px; width:85%; padding:0">
                <div class="bar"></div>
              </div>
              <strong>Quick to learn</strong>
              <div style="float: right; right: 0px;">{{timeSpentLearning | number:1}}</div>
              <div class="ui green tiny progress" id="progressLearn" data-total="10" style="height:8px; width:85%; padding:0">
                <div class="bar">
                </div>
              </div>
              <p>
              </div>
            </div>

          </div>
        </div> <!-- End ui view -->
      </div>


    </div>

    <!-- INCLUDE the success message on adding to list -->
    <div ng-include="'app/tool/toolList/toolListMessage.html'"></div>

    <div class="ui divider"></div>

    <div class="ui page grid">
      <div class="sixteen wide column">
        <div class="footer">
          <p>With â™¥ from The Sunday Times</p>
        </div>
      </div>
    </div>
  </div>